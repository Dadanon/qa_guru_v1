# Заполнить README!

Проект вводного занятия QA Guru представляет собой API сервис по получению данных о книгах и их авторах.  
Доступны следующие функции:
- получение списка всех авторов
- получение списка всех книг
- получение информации о конкретном авторе
- получение информации о конкретной книге
- получение всех книг автора
- изменение данных конкретной книги
- изменение данных конкретного автора
- создание нового автора
- создание новой книги у существующего автора
- удаление конкретной книги
- удаление конкретного автора (и, соответственно, каскадное удаление связанных книг)

Для запуска проекта выполните следующие действия:
1. Установите pipenv (он используется в качестве виртуального окружения)
```python
pip install pipenv
```
2. Откройте в IDE (например, PyCharm) папку с проектом, выберите pipenv в качестве виртуального окружения
3. Установите зависимости
```python
pipenv install
```
4. В проекте используется БД PostgreSQL. Используйте клиент (pgAdmin) или терминал для создания пустой БД проекта, назовите её qa_guru_v1
5. По умолчанию, файл окружения не участвует в системе контроля версий. Создайте файл .env в корневой папке проекта и запишите туда данные для подключения к БД в формате:
```
DATABASE_URL=postgresql://{user}:{password}@localhost:5432/qa_guru_v1
```
где вместо {user} подставьте имя пользователя БД (по умолчанию - postgres), а вместо {password} подставьте пароль пользователя БД (по умолчанию - postgres)  
6. Выполните миграции с помощью alembic:
```python
alembic upgrade head
```
Теперь структура БД должна соответствовать последним изменениям в моделях SQLAlchemy
После успешного выполнения миграций (конец вывода консоли - Done) перейдите к пункту 7
7. Запустите проект, наберите в консоли:
```
uvicorn main:app --reload
```
Проект запущен, список доступных API можно увидеть по адресу http://127.0.0.1:8000/docs  
Также все API протестированы, список тестов находится в папку tests в корневой директории проекта  
Для запуска тестов остановите uvicorn (Ctrl+C в консоли) и наберите pytest  
Помимо тестов API также написаны все тесты для reqres.in, суммарно - 41 тест-

UPD. Рекомендуется сначала запустить smoke тесты. Они проверяет следующее:
- базовый ответ ping-pong от сервера
- доступность переменных окружения (на текущий момент, это только DATABASE_URL, указанная в 5 шаге)
- доступность БД и возможность ответа от БД. Это исключает ошибку, когда сессия будет существовать, но из за несоответствия названия базы в строке подключения и названия базы в PGAdmin применение миграций будет вызывать UnicodeDecodeError

Всего на данный момент 44 теста